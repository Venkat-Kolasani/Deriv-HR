<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>derivHR ‚Äî Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Sora:wght@600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="shared.css">
  <link rel="stylesheet" href="dashboard.css">
  <link rel="stylesheet" href="chat-widget.css">
</head>
<body>

  <!-- ‚ïê‚ïê‚ïê MAIN ‚ïê‚ïê‚ïê -->
  <main class="main">

    <!-- ‚ïê‚ïê‚ïê DASHBOARD CONTENT ‚ïê‚ïê‚ïê -->
    <div class="page-content">

      <!-- AI Morning Briefing -->
      <div class="welcome-banner">
        <div class="welcome-content">
          <div class="welcome-text">
            <h1><span class="welcome-wave">üëã</span> Good morning, <strong>Ahmad</strong></h1>
            <p class="ai-briefing" id="ai-briefing">
              <span class="ai-tag"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg> AI Briefing</span>
              You have <strong>1 visa expiry</strong> approaching for Sarah Kim in 14 days, <strong>1 contract clause error</strong> for Alex Chen requiring correction, and <strong>3 EU employees</strong> overdue on safety training. Immediate action recommended.
            </p>
          </div>
          <div class="welcome-pills">
            <div class="w-pill danger-pulse">
              <span class="w-pill-icon">ÔøΩ</span>
              <div><strong>1</strong><span>Visa Alert</span></div>
            </div>
            <div class="w-pill">
              <span class="w-pill-icon">ÔøΩ</span>
              <div><strong>1</strong><span>Contract Error</span></div>
            </div>
            <div class="w-pill">
              <span class="w-pill-icon">‚ö†Ô∏è</span>
              <div><strong>3</strong><span>Training Due</span></div>
            </div>
          </div>
        </div>
        <div class="welcome-mesh"></div>
      </div>

      <!-- Urgent Actions (AI-powered deep-links) -->
      <div class="urgent-actions" id="urgent-actions">
        <div class="urgent-header">
          <h3><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg> Requires Your Attention</h3>
          <span class="urgent-count">3 items</span>
        </div>
        <div class="urgent-list">
          <a class="urgent-item critical" href="compliance.html?alert=visa-sarah">
            <div class="urgent-indicator"></div>
            <span class="urgent-icon">üõÇ</span>
            <div class="urgent-body">
              <strong>Visa Expiring ‚Äî Sarah Kim</strong>
              <span>Work permit expires in 14 days. Immediate renewal required.</span>
            </div>
            <div class="urgent-meta">
              <span class="urgent-badge critical">Critical</span>
              <span class="urgent-days">14 days left</span>
            </div>
            <svg class="urgent-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="9 18 15 12 9 6"/></svg>
          </a>
          <a class="urgent-item warning" href="contracts.html?alert=contract-alex">
            <div class="urgent-indicator"></div>
            <span class="urgent-icon">üìÑ</span>
            <div class="urgent-body">
              <strong>Contract Clause Error ‚Äî Alex Chen</strong>
              <span>Employment agreement references outdated EPF rates. Must be corrected.</span>
            </div>
            <div class="urgent-meta">
              <span class="urgent-badge warning">Warning</span>
              <span class="urgent-days">6 days left</span>
            </div>
            <svg class="urgent-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="9 18 15 12 9 6"/></svg>
          </a>
          <a class="urgent-item warning" href="compliance.html?alert=training-eu">
            <div class="urgent-indicator"></div>
            <span class="urgent-icon">‚ö†Ô∏è</span>
            <div class="urgent-body">
              <strong>Safety Training Overdue ‚Äî EU Team</strong>
              <span>3 of 12 EU employees pending. Regulatory deadline Feb 20.</span>
            </div>
            <div class="urgent-meta">
              <span class="urgent-badge warning">Warning</span>
              <span class="urgent-days">11 days left</span>
            </div>
            <svg class="urgent-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><polyline points="9 18 15 12 9 6"/></svg>
          </a>
        </div>
      </div>

      <!-- KPI Stats -->
      <div class="kpi-grid">
        <div class="kpi-card">
          <div class="kpi-icon" style="--kpi-color: #a78bfa">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>
          </div>
          <div class="kpi-data">
            <span class="kpi-value" data-count="247">0</span>
            <span class="kpi-label">Total Employees</span>
          </div>
          <div class="kpi-trend up">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><polyline points="18 15 12 9 6 15"/></svg>
            +12
          </div>
          <div class="kpi-sparkline"><svg viewBox="0 0 80 24"><polyline points="0,20 12,16 24,18 36,12 48,14 60,8 72,10 80,4" fill="none" stroke="var(--kpi-color)" stroke-width="2"/></svg></div>
        </div>

        <div class="kpi-card">
          <div class="kpi-icon" style="--kpi-color: #06b6d4">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 7V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v2"/></svg>
          </div>
          <div class="kpi-data">
            <span class="kpi-value" data-count="12">0</span>
            <span class="kpi-label">Open Positions</span>
          </div>
          <div class="kpi-trend down">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><polyline points="6 9 12 15 18 9"/></svg>
            -3
          </div>
          <div class="kpi-sparkline"><svg viewBox="0 0 80 24"><polyline points="0,8 12,12 24,10 36,16 48,14 60,18 72,16 80,20" fill="none" stroke="var(--kpi-color)" stroke-width="2"/></svg></div>
        </div>

        <div class="kpi-card">
          <div class="kpi-icon" style="--kpi-color: #f59e0b">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
          </div>
          <div class="kpi-data">
            <span class="kpi-value" data-count="8">0</span>
            <span class="kpi-label">Pending Contracts</span>
          </div>
          <div class="kpi-trend up warn">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><polyline points="18 15 12 9 6 15"/></svg>
            +2
          </div>
          <div class="kpi-sparkline"><svg viewBox="0 0 80 24"><polyline points="0,18 12,14 24,16 36,10 48,12 60,8 72,6 80,4" fill="none" stroke="var(--kpi-color)" stroke-width="2"/></svg></div>
        </div>

        <div class="kpi-card">
          <div class="kpi-icon" style="--kpi-color: #10b981">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
          </div>
          <div class="kpi-data">
            <span class="kpi-value kpi-percent" data-count="94">0</span>
            <span class="kpi-label">Compliance Score</span>
          </div>
          <div class="kpi-trend up">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><polyline points="18 15 12 9 6 15"/></svg>
            +2%
          </div>
          <div class="kpi-sparkline"><svg viewBox="0 0 80 24"><polyline points="0,16 12,14 24,12 36,10 48,8 60,6 72,5 80,4" fill="none" stroke="var(--kpi-color)" stroke-width="2"/></svg></div>
        </div>
      </div>

      <!-- Dashboard Grid: Activity + Right Column -->
      <div class="dash-grid">

        <!-- Activity Feed -->
        <div class="card card-activity">
          <div class="card-header">
            <h3>Recent Activity</h3>
            <button class="card-action">View All</button>
          </div>
          <div class="activity-list">
            <div class="activity-item">
              <div class="activity-dot" style="background: var(--accent)"></div>
              <div class="activity-content">
                <p><strong>Contract generated</strong> for Alex Chen</p>
                <span>Employment agreement ¬∑ 2 min ago</span>
              </div>
            </div>
            <div class="activity-item">
              <div class="activity-dot" style="background: #10b981"></div>
              <div class="activity-content">
                <p><strong>Compliance check passed</strong> ‚Äî APAC Region</p>
                <span>All 92 employees verified ¬∑ 15 min ago</span>
              </div>
            </div>
            <div class="activity-item">
              <div class="activity-dot" style="background: #f59e0b"></div>
              <div class="activity-content">
                <p><strong>Visa renewal reminder</strong> ‚Äî Sarah Kim</p>
                <span>Expires in 14 days ¬∑ 1 hr ago</span>
              </div>
            </div>
            <div class="activity-item">
              <div class="activity-dot" style="background: #ec4899"></div>
              <div class="activity-content">
                <p><strong>New hire onboarded</strong> ‚Äî Priya Sharma</p>
                <span>Product Design ¬∑ 3 hrs ago</span>
              </div>
            </div>
            <div class="activity-item">
              <div class="activity-dot" style="background: #06b6d4"></div>
              <div class="activity-content">
                <p><strong>Training completed</strong> ‚Äî Data Privacy 2026</p>
                <span>148 of 150 employees ¬∑ 5 hrs ago</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Right Column -->
        <div class="dash-right-col">

          <!-- Department Donut -->
          <div class="card card-donut">
            <div class="card-header"><h3>Team by Department</h3></div>
            <div class="donut-wrapper">
              <div class="donut-chart">
                <div class="donut-ring"></div>
                <div class="donut-center">
                  <span class="donut-total">247</span>
                  <span class="donut-sub">Total</span>
                </div>
              </div>
              <div class="donut-legend">
                <div class="legend-item"><span class="legend-dot" style="background:#a78bfa"></span>Engineering<strong>82</strong></div>
                <div class="legend-item"><span class="legend-dot" style="background:#06b6d4"></span>Product<strong>45</strong></div>
                <div class="legend-item"><span class="legend-dot" style="background:#f59e0b"></span>Operations<strong>38</strong></div>
                <div class="legend-item"><span class="legend-dot" style="background:#ec4899"></span>Design<strong>32</strong></div>
                <div class="legend-item"><span class="legend-dot" style="background:#10b981"></span>HR & Legal<strong>28</strong></div>
                <div class="legend-item"><span class="legend-dot" style="background:#64748b"></span>Other<strong>22</strong></div>
              </div>
            </div>
          </div>

          <!-- Quick Actions -->
          <div class="card card-actions">
            <div class="card-header"><h3>Quick Actions</h3></div>
            <div class="quick-actions">
              <button class="qa-btn">
                <div class="qa-icon" style="--qa: #a78bfa"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg></div>
                <span>New Hire</span>
              </button>
              <button class="qa-btn">
                <div class="qa-icon" style="--qa: #06b6d4"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/></svg></div>
                <span>Contract</span>
              </button>
              <button class="qa-btn">
                <div class="qa-icon" style="--qa: #f59e0b"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></svg></div>
                <span>Schedule</span>
              </button>
              <button class="qa-btn">
                <div class="qa-icon" style="--qa: #10b981"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg></div>
                <span>Audit</span>
              </button>
            </div>
          </div>

        </div>
      </div>

      <!-- Bottom Row: Chart + Upcoming -->
      <div class="dash-bottom-grid">
        <div class="card">
          <div class="card-header">
            <h3>HR Operations ‚Äî This Quarter</h3>
            <span class="card-sub">Automated resolution rate</span>
          </div>
          <div class="chart-bars">
            <div class="cbar" style="--h:65%"><span>Jan</span></div>
            <div class="cbar" style="--h:78%"><span>Feb</span></div>
            <div class="cbar" style="--h:55%"><span>Mar</span></div>
            <div class="cbar" style="--h:85%"><span>Apr</span></div>
            <div class="cbar" style="--h:92%"><span>May</span></div>
            <div class="cbar active" style="--h:88%"><span>Jun</span></div>
          </div>
        </div>

        <div class="card">
          <div class="card-header"><h3>Upcoming Deadlines</h3><button class="card-action">See All</button></div>
          <div class="deadline-list">
            <div class="deadline-item">
              <div class="dl-date danger"><span>14</span>Feb</div>
              <div class="dl-info">
                <strong>Visa Expiry ‚Äî Sarah Kim</strong>
                <span>Work permit renewal ¬∑ Singapore</span>
              </div>
              <span class="dl-badge danger">Critical</span>
            </div>
            <div class="deadline-item">
              <div class="dl-date warn"><span>20</span>Feb</div>
              <div class="dl-info">
                <strong>Safety Training Deadline</strong>
                <span>EU Team ¬∑ 3 of 12 pending</span>
              </div>
              <span class="dl-badge warn">Warning</span>
            </div>
            <div class="deadline-item">
              <div class="dl-date"><span>28</span>Feb</div>
              <div class="dl-info">
                <strong>Q1 Performance Reviews</strong>
                <span>All managers ¬∑ 247 employees</span>
              </div>
              <span class="dl-badge info">Upcoming</span>
            </div>
            <div class="deadline-item">
              <div class="dl-date ok"><span>01</span>Mar</div>
              <div class="dl-info">
                <strong>Compliance Audit ‚Äî APAC</strong>
                <span>Annual certification review</span>
              </div>
              <span class="dl-badge ok">On Track</span>
            </div>
          </div>
        </div>
      </div>

    </div>
  </main>

  <script src="firebase.js"></script>
  <script src="layout.js"></script>
  <script src="dashboard.js"></script>
  <script src="chat-widget.js"></script>
</body>
</html>
