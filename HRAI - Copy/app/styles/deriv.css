/* ═══════════════════════════════════════════
   DERIV HR — Shared Variables & Layout
   Scoped under .deriv-app to avoid Tailwind clash
   ═══════════════════════════════════════════ */

.deriv-app {
  --bg: #08080c;
  --bg-card: #0f0f15;
  --bg-hover: #141420;
  --bg-sidebar: #0b0b11;
  --surface: rgba(255, 255, 255, 0.03);
  --surface-2: rgba(255, 255, 255, 0.06);
  --border: rgba(255, 255, 255, 0.07);
  --border-hover: rgba(255, 255, 255, 0.12);
  --border-active: rgba(167, 139, 250, 0.3);
  --text: #f0f0f5;
  --text-secondary: #a0a0b8;
  --text-muted: #5a5a72;
  --accent: #a78bfa;
  --accent-hover: #c4b5fd;
  --gradient: linear-gradient(135deg, #a78bfa, #8b5cf6);
  --gradient-mesh: linear-gradient(135deg, rgba(167,139,250,0.15) 0%, rgba(139,92,246,0.08) 40%, rgba(6,182,212,0.06) 70%, rgba(16,185,129,0.04) 100%);
  --success: #10b981;
  --warning: #f59e0b;
  --danger: #ef4444;
  --info: #06b6d4;
  --font: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  --font-display: 'Sora', 'Inter', sans-serif;
  --radius-sm: 8px;
  --radius: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;
  --shadow: 0 1px 3px rgba(140, 0, 255, 0.3), 0 4px 20px rgba(225, 0, 255, 0.2);
  --shadow-lg: 0 8px 40px rgba(0,0,0,0.4);
  --ease: cubic-bezier(0.4, 0, 0.2, 1);
  --sidebar-w: 260px;
  --topbar-h: 64px;

  /* Reset for deriv scope */
  font-family: var(--font);
  background: var(--bg);
  color: var(--text);
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Dashboard-specific layout — NOT applied on landing page */
.deriv-app:not(.landing-page) {
  height: 100vh;
  display: flex;
  overflow: hidden;
}

.deriv-app *, .deriv-app *::before, .deriv-app *::after {
  box-sizing: border-box;
}

.deriv-app ::selection { background: rgba(167,139,250,0.3); color: var(--text); }

.deriv-app a { text-decoration: none; color: inherit; }
.deriv-app button { border: none; background: none; color: inherit; cursor: pointer; font-family: inherit; }
.deriv-app input { border: none; background: none; color: inherit; font-family: inherit; outline: none; }

/* ═══ SIDEBAR ═══ */
.deriv-app .sidebar {
  width: var(--sidebar-w);
  height: 100vh;
  background: var(--bg-sidebar);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  position: relative;
  z-index: 50;
  transition: width 0.3s var(--ease), transform 0.3s var(--ease);
  overflow: hidden;
}

/* Suppress transitions on initial load to prevent expand→collapse flash */
.deriv-app .sidebar.no-transition,
.deriv-app .sidebar.no-transition *,
.deriv-app .sidebar.no-transition *::before,
.deriv-app .sidebar.no-transition *::after {
  transition: none !important;
}

/* ── Collapsed state (desktop) ── */
.deriv-app .sidebar.collapsed { width: 68px; }
.deriv-app .sidebar.collapsed .sidebar-logo { font-size: 0; }
.deriv-app .sidebar.collapsed .sidebar-logo span { font-size: 18px; -webkit-text-fill-color: unset; background: none; color: var(--accent); }
.deriv-app .sidebar.collapsed .nav-text,
.deriv-app .sidebar.collapsed .nav-badge,
.deriv-app .sidebar.collapsed .nav-group-label,
.deriv-app .sidebar.collapsed .sidebar-user-info { display: none; }
.deriv-app .sidebar.collapsed .sidebar-header { padding: 20px 12px 16px; justify-content: center; }
.deriv-app .sidebar.collapsed .sidebar-collapse { transform: rotate(180deg); }
.deriv-app .sidebar.collapsed .sidebar-nav { padding: 16px 8px; }
.deriv-app .sidebar.collapsed .nav-item { justify-content: center; padding: 10px; gap: 0; }
.deriv-app .sidebar.collapsed .nav-item.active::before { left: -2px; }
.deriv-app .sidebar.collapsed .sidebar-footer { padding: 12px 8px; }
.deriv-app .sidebar.collapsed .sidebar-user { justify-content: center; padding: 10px; }
.deriv-app .sidebar.collapsed .sidebar-logout { display: none; }

.deriv-app .sidebar-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 20px 16px;
  border-bottom: 1px solid var(--border);
}

.deriv-app .sidebar-logo {
  font-family: var(--font-display);
  font-size: 22px;
  font-weight: 700;
  letter-spacing: -0.5px;
  color: var(--text);
}

.deriv-app .sidebar-logo span {
  background: var(--gradient);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.deriv-app .sidebar-collapse {
  width: 28px;
  height: 28px;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  transition: all 0.2s;
}
.deriv-app .sidebar-collapse:hover { background: var(--surface-2); color: var(--text-secondary); }

.deriv-app .sidebar-nav {
  flex: 1;
  padding: 16px 12px;
  overflow-y: auto;
  scrollbar-width: none;
}
.deriv-app .sidebar-nav::-webkit-scrollbar { display: none; }

.deriv-app .nav-group { margin-bottom: 24px; }

.deriv-app .nav-group-label {
  display: block;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: var(--text-muted);
  padding: 0 12px;
  margin-bottom: 8px;
}

.deriv-app .nav-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  border-radius: var(--radius);
  font-size: 14px;
  font-weight: 500;
  color: var(--text-muted);
  transition: all 0.2s var(--ease);
  cursor: pointer;
  position: relative;
  margin-bottom: 2px;
}

.deriv-app .nav-item:hover { color: var(--text-secondary); background: var(--surface); }

.deriv-app .nav-item.active { color: var(--text); background: rgba(167, 139, 250, 0.1); }

.deriv-app .nav-item.active::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 3px;
  height: 20px;
  border-radius: 0 4px 4px 0;
  background: var(--gradient);
}

.deriv-app .nav-badge {
  margin-left: auto;
  font-size: 11px;
  font-weight: 600;
  padding: 2px 8px;
  border-radius: 10px;
  background: var(--surface-2);
  color: var(--text-muted);
}
.deriv-app .nav-badge.accent { background: rgba(167,139,250,0.15); color: var(--accent); }

.deriv-app .sidebar-footer { padding: 12px; border-top: 1px solid var(--border); }

.deriv-app .sidebar-user {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: var(--radius);
  margin-top: 8px;
  transition: background 0.2s;
}
.deriv-app .sidebar-user:hover { background: var(--surface); }

.deriv-app .sidebar-avatar {
  width: 36px;
  height: 36px;
  border-radius: var(--radius);
  background: var(--gradient);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 800;
  color: white;
  flex-shrink: 0;
}

.deriv-app .sidebar-user-info { flex: 1; min-width: 0; }
.deriv-app .sidebar-user-info strong { display: block; font-size: 13px; font-weight: 600; }
.deriv-app .sidebar-user-info span { font-size: 11px; color: var(--text-muted); }

.deriv-app .sidebar-logout { color: var(--text-muted); cursor: pointer; transition: color 0.2s; flex-shrink: 0; }
.deriv-app .sidebar-logout:hover { color: var(--danger); }

/* ── Nav item tooltip on collapsed ── */
.deriv-app .sidebar.collapsed .nav-item { position: relative; }
.deriv-app .sidebar.collapsed .nav-item::after {
  content: attr(href);
  display: none;
}

/* ═══ MAIN ═══ */
.deriv-app .main {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  min-width: 0;
}

/* ═══ TOPBAR ═══ */
.deriv-app .topbar {
  height: var(--topbar-h);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 28px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
  background: rgba(8, 8, 12, 0.8);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  z-index: 40;
}

.deriv-app .topbar-left { display: flex; align-items: center; gap: 16px; }

.deriv-app .menu-toggle {
  display: none;
  width: 36px;
  height: 36px;
  border-radius: var(--radius-sm);
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  transition: all 0.2s;
}
.deriv-app .menu-toggle:hover { background: var(--surface-2); color: var(--text); }

.deriv-app .search-box {
  display: flex;
  align-items: center;
  gap: 10px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 8px 14px;
  width: 320px;
  transition: border-color 0.3s, box-shadow 0.3s;
}
.deriv-app .search-box:focus-within { border-color: var(--border-active); box-shadow: 0 0 0 3px rgba(167, 139, 250, 0.08); }
.deriv-app .search-box svg { color: var(--text-muted); flex-shrink: 0; }
.deriv-app .search-box input { flex: 1; font-size: 13px; color: var(--text); }
.deriv-app .search-box input::placeholder { color: var(--text-muted); }
.deriv-app .search-box kbd {
  font-family: inherit;
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  background: var(--surface-2);
  padding: 2px 6px;
  border-radius: 6px;
  border: 1px solid var(--border);
}

.deriv-app .topbar-right { display: flex; align-items: center; gap: 8px; }

.deriv-app .topbar-icon-btn {
  width: 36px;
  height: 36px;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  transition: all 0.2s;
  position: relative;
}
.deriv-app .topbar-icon-btn:hover { background: var(--surface-2); color: var(--text); }

.deriv-app .notif-dot {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: var(--danger);
  border: 2px solid var(--bg);
}

.deriv-app .topbar-divider { width: 1px; height: 24px; background: var(--border); margin: 0 8px; }

.deriv-app .topbar-profile {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 6px 10px 6px 6px;
  border-radius: var(--radius);
  cursor: pointer;
  transition: background 0.2s;
}
.deriv-app .topbar-profile:hover { background: var(--surface); }

.deriv-app .topbar-avatar {
  width: 32px;
  height: 32px;
  border-radius: var(--radius-sm);
  background: var(--gradient);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: 800;
  color: white;
}

.deriv-app .topbar-name { font-size: 13px; font-weight: 500; color: var(--text-secondary); }

/* ═══ TOPBAR DROPDOWNS ═══ */
.deriv-app .topbar-dropdown-wrap { position: relative; }

.deriv-app .topbar-dropdown {
  position: absolute;
  top: calc(100% + 10px);
  right: 0;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  box-shadow: 0 16px 48px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,0.03);
  opacity: 0;
  transform: translateY(-8px) scale(0.96);
  pointer-events: none;
  transition: all 0.2s var(--ease);
  z-index: 200;
  overflow: hidden;
}

.deriv-app .topbar-dropdown.open {
  opacity: 1;
  transform: translateY(0) scale(1);
  pointer-events: all;
}

/* Notification dropdown */
.deriv-app .notif-dropdown { width: 340px; }

.deriv-app .dd-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
  border-bottom: 1px solid var(--border);
}

.deriv-app .dd-header strong { font-size: 14px; font-weight: 700; }

.deriv-app .dd-mark-read {
  font-size: 11px;
  font-weight: 600;
  color: var(--accent);
  padding: 4px 8px;
  border-radius: 6px;
  transition: background 0.2s;
}
.deriv-app .dd-mark-read:hover { background: rgba(167,139,250,0.1); }

.deriv-app .dd-list { max-height: 320px; overflow-y: auto; }

.deriv-app .dd-item {
  display: flex;
  gap: 12px;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border);
  transition: background 0.2s;
  cursor: pointer;
  text-decoration: none;
  color: inherit;
}
.deriv-app .dd-item:last-child { border-bottom: none; }
.deriv-app .dd-item:hover { background: var(--surface); }

.deriv-app .dd-item.unread { background: rgba(167,139,250,0.03); }

.deriv-app .dd-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
  margin-top: 5px;
}
.deriv-app .dd-dot.critical { background: var(--danger); }
.deriv-app .dd-dot.warning { background: var(--warning); }
.deriv-app .dd-dot.info { background: var(--info); }
.deriv-app .dd-dot.success { background: var(--success); }

.deriv-app .dd-body { flex: 1; min-width: 0; }
.deriv-app .dd-body strong { display: block; font-size: 12px; font-weight: 600; margin-bottom: 2px; }
.deriv-app .dd-body > span { display: block; font-size: 11px; color: var(--text-muted); }
.deriv-app .dd-time { font-size: 10px !important; color: var(--text-muted) !important; margin-top: 3px !important; }

.deriv-app .dd-footer {
  display: block;
  text-align: center;
  padding: 10px;
  font-size: 12px;
  font-weight: 600;
  color: var(--accent);
  border-top: 1px solid var(--border);
  transition: background 0.2s;
}
.deriv-app .dd-footer:hover { background: rgba(167,139,250,0.06); }

/* Profile dropdown */
.deriv-app .profile-dropdown { width: 220px; }

.deriv-app .dd-profile-card {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px;
}

.deriv-app .dd-profile-avatar {
  width: 40px;
  height: 40px;
  border-radius: var(--radius);
  background: var(--gradient);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 800;
  color: white;
  flex-shrink: 0;
}

.deriv-app .dd-profile-card div strong { display: block; font-size: 14px; font-weight: 600; }
.deriv-app .dd-profile-card div span { font-size: 11px; color: var(--text-muted); }

.deriv-app .dd-divider { height: 1px; background: var(--border); margin: 0; }

.deriv-app .dd-menu-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 16px;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-muted);
  transition: all 0.15s;
  text-decoration: none;
}
.deriv-app .dd-menu-item:hover { color: var(--text); background: var(--surface); }
.deriv-app .dd-menu-item svg { flex-shrink: 0; }

.deriv-app .dd-logout { color: var(--danger) !important; }
.deriv-app .dd-logout:hover { background: rgba(239,68,68,0.06) !important; }

/* ═══ PAGE CONTAINER ═══ */
.deriv-app .page-content {
  flex: 1;
  overflow-y: auto;
  padding: 28px;
  scrollbar-width: thin;
  scrollbar-color: rgba(167,139,250,0.2) transparent;
  animation: derivPageIn 0.4s var(--ease);
}
.deriv-app .page-content::-webkit-scrollbar { width: 5px; }
.deriv-app .page-content::-webkit-scrollbar-track { background: transparent; }
.deriv-app .page-content::-webkit-scrollbar-thumb { background: rgba(167,139,250,0.2); border-radius: 3px; }

@keyframes derivPageIn {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ═══ SHARED COMPONENTS ═══ */
.deriv-app .card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 20px;
  transition: border-color 0.3s;
}
.deriv-app .card:hover { border-color: var(--border-hover); }

.deriv-app .card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}
.deriv-app .card-header h3 {
  font-family: var(--font-display);
  font-size: 15px;
  font-weight: 700;
  letter-spacing: -0.2px;
}

.deriv-app .card-action {
  font-size: 12px;
  font-weight: 600;
  color: var(--accent);
  padding: 4px 10px;
  border-radius: var(--radius-sm);
  transition: all 0.2s;
}
.deriv-app .card-action:hover { background: rgba(167,139,250,0.1); }

.deriv-app .btn-primary {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 10px 20px;
  border-radius: var(--radius);
  background: var(--gradient);
  color: white;
  font-size: 13px;
  font-weight: 600;
  transition: all 0.25s var(--ease);
  box-shadow: 0 4px 20px rgba(167,139,250,0.25);
}
.deriv-app .btn-primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 30px rgba(167,139,250,0.35);
}

/* ═══ RESPONSIVE — SHARED ═══ */
@media (max-width: 1024px) {
  .deriv-app .sidebar {
    position: fixed;
    left: 0;
    top: 0;
    transform: translateX(-100%);
    z-index: 100;
    box-shadow: var(--shadow-lg);
    width: var(--sidebar-w) !important;
  }
  .deriv-app .sidebar.collapsed { width: var(--sidebar-w) !important; }
  .deriv-app .sidebar.collapsed .nav-text,
  .deriv-app .sidebar.collapsed .nav-badge,
  .deriv-app .sidebar.collapsed .nav-group-label,
  .deriv-app .sidebar.collapsed .sidebar-user-info { display: flex; }
  .deriv-app .sidebar.collapsed .sidebar-nav { padding: 16px 12px; }
  .deriv-app .sidebar.collapsed .nav-item { justify-content: flex-start; padding: 10px 12px; gap: 12px; }
  .deriv-app .sidebar.collapsed .sidebar-header { padding: 20px 20px 16px; justify-content: space-between; }
  .deriv-app .sidebar.collapsed .sidebar-collapse { transform: none; }
  .deriv-app .sidebar.collapsed .sidebar-footer { padding: 12px; }
  .deriv-app .sidebar.collapsed .sidebar-user { justify-content: flex-start; padding: 10px 12px; }
  .deriv-app .sidebar.open { transform: translateX(0); }
  .deriv-app .menu-toggle { display: flex; }
}

@media (max-width: 768px) {
  .deriv-app .topbar { padding: 0 16px; }
  .deriv-app .search-box { width: 200px; }
  .deriv-app .search-box kbd { display: none; }
  .deriv-app .topbar-name { display: none; }
  .deriv-app .page-content { padding: 20px 16px; }
}

@media (max-width: 480px) {
  .deriv-app .search-box { width: 160px; }
}

/* Overlay for mobile sidebar */
.deriv-app .sidebar-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  backdrop-filter: blur(4px);
  z-index: 99;
}
.deriv-app .sidebar-overlay.visible { display: block; }
